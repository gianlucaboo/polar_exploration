mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE), month_day))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE), month_day))
View(amundsenJournal_df_t)
a <- paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|")
length(a)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=", |"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=". |"), simplify = FALSE), month_day))
View(amundsenJournal_df_t)
amundsenJournal_df_r <- amundsenJournal_df_t %>% filter(!is.na(month))
View(amundsenJournal_df_r)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="integer(0)", NA, month),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=", |"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=". |"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="integer(0)", NA, month_day)
)
amundsenJournal_df_r <- amundsenJournal_df_t %>% filter(!is.na(month))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="integer(0)", NA_character_, month),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=", |"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=". |"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="integer(0)", NA_character_, month_day)
)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=", |"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=". |"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="character(0)", NA, month_day)
)
View(amundsenJournal_df_t)
amundsenJournal_df_r <- amundsenJournal_df_t %>% filter(!is.na(month))
View(amundsenJournal_df_r)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=" |"), simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=")|"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="character(0)", NA, month_day)
)
amundsenJournal_df_r <- amundsenJournal_df_t %>% filter(!is.na(month))
View(amundsenJournal_df_r)
str_match("january 23,", a)
str_match("january 23,|january 2", a)
str_match("january 23,|january 2,", a)
str_match_all("january 23,|january 2,", a)
a <- amundsenJournal_df %>% mutate(month_day=,str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE))
View(a)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=",|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=".|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=")|"))
paste(c("a", "b", "c"), colapse=c(",", "."))
simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=")|"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="character(0)", NA, month_day)
)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=",|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=".|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=")|"))
paste(c("a", "b", "c"), collapse=c(",", "."))
simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=")|"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="character(0)", NA, month_day)
)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=",|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=".|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=")|"))
paste(c("a", "b", "c"))
simplify = FALSE),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=",|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE), month_day),
month_day=ifelse(is.na(month_day), str_extract_all(paragraph, paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=")|"), simplify = FALSE), month_day),
month_day=ifelse(month_day=="character(0)", NA, month_day)
)
paste(c("a", "b", "c"))
paste(c("a", "b", "c"), collapse=c(",", "."))
c(paste(c("a", "b", "c")), paste("d", "e", "f"))
c(paste(c("a", "b", "c")), c("d", "e", "f"))
c(paste(c("a", "b", "c"), collapse=","), c("d", "e", "f". collapse="/"))
c(paste(c("a", "b", "c"), collapse=","), c("d", "e", "f"). collapse="/"))
c(paste(c("a", "b", "c"), collapse=","), paste(c("d", "e", "f"). collapse="/"))
paste(c("d", "e", "f"). collapse="/")
c(paste(c("a", "b", "c"), collapse=","), paste(c("d", "e", "f"). collapse="."))
c(paste(c("a", "b", "c"), collapse=","), paste(c("d", "e", "f"). collapse="."))
c(paste(c("a", "b", "c"), collapse=","))
c(paste(c("a", "b", "c"), collapse=","), "d")
c(paste(c("a", "b", "c"), collapse=","), paste("d"))
c(paste(c("a", "b", "c"), collapse=","), paste("d", collapse="."))
c(paste(c("a", "b", "c"), collapse=","), paste(c("d", "e"), collapse="."))
c(paste(c("a", "b", "c"), collapse=","), paste(c("d", "e"), collapse=".")) %>% paste(collapse="|")
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=",|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=".|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=")|")) %>%
paste(collapse="|"), simplify = FALSE))
a <- c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=",|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=".|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=")|")) %>%
paste(collapse="|")
print(a)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\,|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\.|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\)|")) %>%
paste(collapse="|"), simplify = FALSE))
a <- c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse=" |"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\,|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\.|"),
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>% paste(collapse="\)|"))
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE)))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste(month.name %>% tolower(), "\s\d", collapse="|"), simplify = FALSE)
c(
paste(rep(month.name %>% tolower(), each = length(seq(1, 31, 1))), seq(1, 31, 1), sep = " ") %>%
paste(collapse=".|"), simplify = FALSE)))
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste(month.name %>% tolower(), "\s\d", collapse="|"), simplify = FALSE))
a <- paste(month.name %>% tolower(), "\s\d", collapse="|")
a <- paste(month.name %>% tolower(), "a", collapse="|")
a
paste0(month.name %>% tolower(), "\s\d")
paste0(month.name %>% tolower(), "s\d")
paste0(month.name %>% tolower(), "sd")
paste0(month.name %>% tolower(), "\\s\\d")
paste0(month.name %>% tolower(), "\s\d")
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d", collapse="|"), simplify = FALSE))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d{1,2}", collapse="|"), simplify = FALSE))
View(amundsenJournal_df_t)
amundsenJournal_df_r <- amundsenJournal_df_t %>% filter(!is.na(month))
View(amundsenJournal_df_t)
View(amundsenJournal_df_r)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d{1,2}", collapse="|"), simplify = FALSE),
lat=str_extract_all(paragraph, "lat.\\dº", simplify = FALSE))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d{1,2}", collapse="|"), simplify = FALSE),
lat=str_extract_all(paragraph, "lat.", simplify = FALSE))
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d{1,2}", collapse="|"), simplify = FALSE),
lat=str_extract_all(paragraph, "lat\\.", simplify = FALSE))
View(amundsenJournal_df_t)
View(amundsenJournal_df_t)
amundsenJournal_df_t <- amundsenJournal_df %>%
#extract chapters end filter chapters five to fourteen
mutate(chapter=str_extract_all(paragraph, paste("chapter ", seq(1, 16, 1) %>% as.roman() %>% tolower(), ":", sep="", collapse="|"), simplify = TRUE) %>%
as.character() %>% na_if("") %>% str_remove_all(":"), .before=paragraph) %>%
fill(chapter, .direction="down") %>%
filter(str_detect(chapter, paste("chapter", seq(5, 14, 1) %>% as.roman() %>% tolower(), collapse="|")) & str_length(paragraph)>50) %>%
#extract years
mutate(year=str_extract_all(paragraph, seq(1872, 1912, 1) %>% paste(collapse="|"), simplify = FALSE),
year=lapply(year, function(x){as.integer(x)}),
year=ifelse(year=="integer(0)", NA, year),
#extract month and year
month=str_extract_all(paragraph, month.name %>% tolower() %>%
paste(collapse="|"), simplify = FALSE),
month=ifelse(month=="character(0)", NA, month),
month_day=str_extract_all(paragraph, paste0(month.name %>% tolower(), "\\s\\d{1,2}", collapse="|"), simplify = FALSE),
temp=str_extract_all(paragraph, "\\s\\dºf|\\s\\dº f", simplify = FALSE))
View(amundsenJournal_df_t)
